(this.webpackJsonphadrianblog=this.webpackJsonphadrianblog||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),l=a.n(s),c=a(8),i=a(10),o=a(12),u=a(11),m=a(13),g=a(23),p=a(16),h=a(46),d=a.n(h),f={apiKey:"AIzaSyBjm0OPcXSb-lD1YiUhaM2Tbvk5nTMwY6M",authDomain:"hadrian-test-5a70f.firebaseapp.com",databaseURL:"https://hadrian-test-5a70f.firebaseio.com",projectId:"hadrian-test-5a70f",storageBucket:"hadrian-test-5a70f.appspot.com",messagingSenderId:"87929167428",appId:"1:87929167428:web:8f82c048f81b9bb3766611"},b=function e(){var t=this;Object(c.a)(this,e),this.articles="blogArticles",this.URLs="imageURLs",this.getArticleId=function(){return t.app.database().ref(t.articles).push().key},this.pushArticle=function(e){var a=t.getArticleId();t.app.database().ref(t.articles).child(a).set({id:a,title:e.title,content:e.content})},this.getImageId=function(){return t.app.database().ref(t.URLs).push().key},this.pushImageUrl=function(e){var a=t.getImageId();t.app.database().ref(t.URLs).child(a).set({ID:a,name:e.name,URL:e.URL})},this.storage=function(){return t.app.storage()},this.getURLs=function(){return t.app.database().ref(t.URLs)},this.getArticles=function(){return t.app.database().ref(t.articles)},this.removeArticle=function(e){return t.getArticles().child(e).remove()},this.app=d.a.initializeApp(f)},v=function(){var e;return{getInstance:function(){return e||(e=new b),e}}}(),E=a(48),_=a.n(E),y=a(49),j=a.n(y),I=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){if(t.target.files[0]){var a=t.target.files[0],n=_.a.MD5(a.name+Date.now()).toString();e.storage.ref("images/".concat(n)).put(a).on("state_changed",(function(t){t.bytesTransferred/t.totalBytes==0?e.setState({progress:"\u0142adowanie ..."}):(e.setState({progress:""}),j.a.animateScroll.scrollToBottom())}),(function(e){console.log(e)}),(function(){e.storage.ref("images").child(n).getDownloadURL().then((function(e){var t=e;v.getInstance().pushImageUrl({name:n,URL:t})}))}))}},e.removeImg=function(t,a,n){t.stopPropagation(),e.storage.ref("images").child(n).delete(),e.database.child(a).remove()},e.showPreview=function(t){e.setState({clickImageURL:t||"",display:"flex"})},e.closePreview=function(){e.setState({display:"none"})},e.database=v.getInstance().getURLs(),e.storage=v.getInstance().storage(),e.state={progress:"",image:null,images:[{URL:"https://slodycze-24.pl/wp-content/uploads/2019/08/placeholder.jpg"}],clickImageURL:"",display:"none"},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.database.on("value",(function(t){var a=t.val();e.setState({images:a?Object.values(a):[]})}))}},{key:"componentWillUnmount",value:function(){this.database.off("value")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"gallery"},r.a.createElement("div",{className:"gallery__body"},this.props.user?r.a.createElement("form",{className:"gallery__form"},r.a.createElement("label",{className:"gallery__button",htmlFor:"upload-btn"},"Dodaj zdj\u0119cie"),r.a.createElement("input",{accept:"image/x-png,image/gif,image/jpeg",id:"upload-btn",style:{display:"none"},type:"file",onChange:this.handleChange}),r.a.createElement("h2",{className:"gallery__loading"},this.state.progress)):r.a.createElement("div",null),r.a.createElement("div",{className:"gallery__container"},this.state.images.map((function(t){return r.a.createElement("div",{onClick:function(){return e.showPreview(t.URL)},className:"gallery__thumbnail",style:{height:"100%",backgroundImage:"url(".concat(t.URL,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"12px"}},e.props.user?r.a.createElement("div",{onClick:function(a){return e.removeImg(a,t.ID,t.name)},className:"gallery__remove"},r.a.createElement("i",{className:"fas fa-trash"})):r.a.createElement("div",null))})))),r.a.createElement("div",{className:"gallery__preview-container",style:{display:"".concat(this.state.display)},onClick:function(){return e.closePreview()}},r.a.createElement("div",{className:"gallery__preview"},r.a.createElement("img",{className:"gallery__image",src:this.state.clickImageURL,onClick:function(e){return e.stopPropagation()}}))))}}]),t}(r.a.Component),N=a(50),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.login=function(e){e.preventDefault(),v.getInstance().app.auth().signInWithEmailAndPassword(a.state.email,a.state.password).then((function(e){})).catch((function(e){return console.log(e)})),a.resetState()},a.signup=function(e){e.preventDefault(),v.getInstance().app.auth().createUserWithEmailAndPassword(a.state.email,a.state.password).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),a.resetState()},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.resetState=function(){a.setState({email:"",password:""})},a.logout=function(){v.getInstance().app.auth().signOut()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login__container"},this.props.user?r.a.createElement("div",{className:"login__loggedin"},r.a.createElement("h1",{className:"login__info"},"Jeste\u015b zalogowany jako administrator"),r.a.createElement("button",{onClick:this.logout},"Wyloguj")):r.a.createElement("form",{className:"login__form"},r.a.createElement("label",{htmlFor:"email"},"E-mail"),r.a.createElement("input",{type:"email",id:"E-mail",name:"email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Has\u0142o"),r.a.createElement("input",{type:"password",id:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("button",{onClick:this.login,type:"submit"},"Zaloguj si\u0119")))}}]),t}(r.a.Component),O=function(){return r.a.createElement("div",{className:"header__brand"},r.a.createElement("i",{className:"fas fa-pen-nib"}),"HadrianBlog")},w=function(){return r.a.createElement("ul",{className:"navigation__list"},r.a.createElement("li",{className:"navigation__item"},r.a.createElement(g.b,{className:"navigation__button",to:"/"},"blog")),r.a.createElement("li",{className:"navigation__item"},r.a.createElement(g.b,{className:"navigation__button",to:"/gallery"},"galeria")))},U=function(){return r.a.createElement("header",{className:"header"},r.a.createElement(O,null),r.a.createElement(w,null))},S=function(e){var t=e.articles,a=void 0!==t&&0!==t.length;return r.a.createElement("div",{className:"blog-container"},r.a.createElement("div",{className:"blog"},!a&&r.a.createElement("article",{className:"article"},r.a.createElement("h2",{className:"article__header article__header--noArticles"},"PUSTO"),r.a.createElement("div",{className:"article__area"},r.a.createElement("p",{className:"article__content"},"BRAK ARTYKU\u0141\xd3W DO WY\u015aWIETLENIA"))),a&&e.articles.map((function(t){return r.a.createElement("article",{key:t.id,className:"article"},r.a.createElement("h2",{className:"article__header"},t.title),r.a.createElement("div",{className:"article__area"},r.a.createElement("p",{className:"article__content"},t.content),e.user?r.a.createElement("button",{onClick:function(){return e.removeFn(t.id)},className:"article__button--remove"},"X"):r.a.createElement("div",null)))}))))},R=function(e){return r.a.createElement("form",{onSubmit:e.submitFn,autocomplete:"off",class:"form"},r.a.createElement("label",{for:"title",class:"form__label"},"Tytu\u0142"),r.a.createElement("input",{id:"title",class:"form__title"}),r.a.createElement("label",{for:"content",class:"form__label"},"Tre\u015b\u0107"),r.a.createElement("textarea",{id:"content",class:"form__content"}),r.a.createElement("button",{type:"submit",class:"form__add"},"Dodaj artyku\u0142"))},C=function(e){return r.a.createElement("p",{className:"form__error"},e.errorMessage)},L=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).addPost=function(t){t.preventDefault(),""===t.target[0].value||""===t.target[1].value?e.setState({errorInfo:"Wype\u0142nij oba pola zanim dodasz artyku\u0142!!"}):(e.setState({errorInfo:""}),v.getInstance().pushArticle({title:t.target[0].value,content:t.target[1].value}),t.target.reset())},e.removePost=function(e){v.getInstance().removeArticle(e)},e.state={errorInfo:""},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.user?r.a.createElement(R,{submitFn:this.addPost}):r.a.createElement("div",null),!!this.state.errorInfo&&r.a.createElement(C,{errorMessage:this.state.errorInfo}),r.a.createElement(S,{user:this.props.user,articles:this.props.articles,removeFn:this.removePost}))}}]),t}(r.a.Component),A=function(e){return r.a.createElement("main",{className:"main"},r.a.createElement(L,{user:e.user,articles:e.articles}))},D=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).database=v.getInstance().getArticles(),e.state={articles:[],user:{}},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authListener(),this.database.on("value",(function(t){var a=t.val();e.setState({articles:a?Object.values(a).reverse():[]})}))}},{key:"componentWillUnmount",value:function(){this.database.off("value")}},{key:"authListener",value:function(){var e=this;v.getInstance().app.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"container"},r.a.createElement(U,null),r.a.createElement(p.a,{exact:!0,path:"/",component:function(){return r.a.createElement(A,{user:e.state.user,articles:e.state.articles})}}),r.a.createElement(p.a,{path:"/gallery",component:function(){return r.a.createElement(I,{user:e.state.user})}}),r.a.createElement(p.a,{path:"/admin",component:function(){return r.a.createElement(k,{user:e.state.user})}}))))}}]),t}(r.a.Component),P=(a(102),a(103),function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D,null)}}]),t}(r.a.Component));l.a.render(r.a.createElement(P,null),document.getElementById("root"))},53:function(e,t,a){e.exports=a(104)}},[[53,1,2]]]);
//# sourceMappingURL=main.584ba641.chunk.js.map